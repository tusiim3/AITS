import React, { useState } from 'react';
import "./lecturer_dashboard.css";
import Pend from './components/pending_issues.jsx';
import His from './components/issue_history.jsx';
import Profile from './components/profile.jsx';
import Home from './components/home.jsx';
import axiosInstance from '../axioscomponent.jsx';
import { FiHome, FiClock, FiUser, FiLogOut } from 'react-icons/fi';
import { FaBug } from 'react-icons/fa';

function LecturerDashboard() {
  // State to track which component to render
  const [currentView, setCurrentView] = useState('home'); // Default view

  const handleLogout = async (e) => {
    try {
      const response = await axiosInstance.post("/Logout/");
      console.log(response.data);
      localStorage.removeItem("token");
      window.location.href = '/';
    } catch (error) {
      console.error("Error during logout:", error);
      alert("Failed to logout. Please try again.");
    }
  };

  return (
    <div>
      <div className='left_container'>
        <div className='profile_container'>
          <img src='./logo/martha.jpg' alt="Profile" className='profile_pic' />
        </div>

        <div className='nav_buttons'>
          <button 
            className={`nav_btn ${currentView === 'home' ? 'active' : ''}`}
            onClick={() => setCurrentView('home')}
          >
            <FiHome className="btn_icon" /> Home
          </button>

          <button 
            className={`nav_btn ${currentView === 'pending' ? 'active' : ''}`}
            onClick={() => setCurrentView('pending')}
          >
            <FaBug className="btn_icon" /> Pending Issues
          </button>

          <button 
            className={`nav_btn ${currentView === 'history' ? 'active' : ''}`}
            onClick={() => setCurrentView('history')}
          >
            <FiClock className="btn_icon" /> Issue History
          </button>

          <button 
            className={`nav_btn ${currentView === 'profile' ? 'active' : ''}`}
            onClick={() => setCurrentView('profile')}
          >
            <FiUser className="btn_icon" /> Profile
          </button>
        </div>

        <button className='logout_btn' onClick={handleLogout}>
          <FiLogOut className="btn_icon" /> Log Out
        </button>
      </div>

      <div className='right_container'>
        {currentView === 'home' && <Home />}
        {currentView === 'pending' && <Pend />}
        {currentView === 'history' && <His />}
        {currentView === 'profile' && <Profile />}
      </div>
    </div>
  );
}

export default LecturerDashboard;